<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinch-Zoom Detection</title>
    <style>
        #pinchZoomElement {
            width: 100px;
            height: 100px;
            background-color: red;
            overflow: hidden;
            touch-action: none;
            transition: transform 0.05s ease-out;
            position: absolute; /* Absolute Positionierung für das Zentrieren */
            left: 50%; /* Horizontal in der Mitte positionieren */
            top: 50%; /* Vertikal in der Mitte positionieren */
            transform-origin: center center; /* Ursprung für Transformation in der Mitte festlegen */
        }
    </style>
</head>

<body>

    <div id="pinchZoomElement"></div>

    <script>
        var pinchZoomElement = document.getElementById('pinchZoomElement');
        var scaling = false;
        var initialDist;
        var currentScale = 1;
        var mid_x = 0; // detect the middle between the finger touches...
        var mid_y = 0; // ...to zoom at a certain position

        function pinchStart(e) {
            initialDist = getDistance(e.touches[0], e.touches[1]);
        }

        function pinchMove(e) {
            var currentDist = getDistance(e.touches[0], e.touches[1]);
            var scale = currentDist / initialDist;
            currentScale = Math.min(Math.max(scale, 0.5), 3);

            // how can the element be shifted to other position?
            pinchZoomElement.style.transform = 'translate(-50%, -50%) scale(' + currentScale + ')';
            pinchZoomElement.style.left = mid_x + 'px';
            pinchZoomElement.style.right = mid_y + 'px';
            console.log('Aktueller Zoom:', currentScale.toFixed(2));
        }

        function pinchEnd() {
            //pinchZoomElement.style.transform = 'translate(-50%, -50%) scale(1)';
            //currentScale = 1;
        }

        function getDistance(touch1, touch2) {
            mid_x = (touch1.pageX + touch2.pageX) * 0.5;
            mid_y = (touch1.pageY + touch2.pageY) * 0.5;
            return Math.hypot(
                touch1.pageX - touch2.pageX,
                touch1.pageY - touch2.pageY
            );
        }

        pinchZoomElement.addEventListener('touchstart', function (e) {
            if (e.touches.length === 2) {
                scaling = true;
                pinchStart(e);
            }
        });

        pinchZoomElement.addEventListener('touchmove', function (e) {
            if (scaling) {
                pinchMove(e);
            }
        });

        pinchZoomElement.addEventListener('touchend', function (e) {
            if (scaling) {
                pinchEnd(e);
                scaling = false;
            }
        });
    </script>

</body>

</html>
